# 📋 ログビューアー確認手順（詳細版）

## ステップ1: ログビューアーを開く

### 方法1: 画面右下の📋ボタンから（推奨）

1. **SalesMindアプリをブラウザで開く**
   - `frontend/index.html` をブラウザで開いてください

2. **画面の右下を確認**
   - 画面の**右下隅**に「**📋**」という丸い紫色のボタンがあります
   - このボタンは画面の**最下部、右端**に固定表示されています

3. **📋ボタンをクリック**
   - ボタンをクリックすると、画面の**下部からログビューアーがスライドして表示**されます

### 方法2: ブラウザの開発者ツールから

もし📋ボタンが見つからない場合：

1. **開発者ツールを開く**
   - **F12キー**を押す
   - または、ブラウザ上で**右クリック**→「**検証**」を選択

2. **Console（コンソール）タブを開く**
   - 開発者ツールの上部にタブがあります
   - 「**Console**」タブをクリック

3. **コマンドを実行**
   - コンソールの入力欄に以下を入力して**Enterキー**を押す：
   ```javascript
   window.logViewer.toggle()
   ```

## ステップ2: SPIN質問生成のログを確認する

### 事前準備

1. **ログビューアーを開いた状態にする**（📋ボタンで開く）

2. **フィルターを確認**
   - ログビューアーの上部にチェックボックスがあります
   - 少なくとも以下は**チェックを入れて**ください：
     - ☑ **Debug** - デバッグ情報
     - ☑ **Error** - エラー情報
     - ☑ **Info** - 情報

### ログを記録しながらテスト

1. **「SPIN質問を生成」ボタンをクリック**

2. **ログビューアーで以下を確認**（上から順番に）：

   - **"SPIN質問生成を開始"** - 開始ログ
   - **"API Request: POST /api/spin/generate/"** - APIリクエスト送信
   - **"レスポンステキストを取得"** - レスポンス受信
     - ここでレスポンスの内容が表示されます
   - **"JSON解析成功"** - JSON解析完了
     - `hasQuestions: true` と表示されていれば質問データがあります
   - **"レスポンスデータの内容"** - データ構造の確認
   - **"質問データを検出、表示処理を開始"** - 表示処理開始
   - **"displaySpinQuestions called with:"** - 表示関数呼び出し
   - **"SPIN質問の表示が完了しました"** - 表示完了

### エラーが発生している場合

以下のログが出ている場合は、その内容を確認してください：

- **"JSON解析エラー"** - JSON形式が正しくない
- **"質問データが存在しません"** - データ構造の問題
- **"コンテンツ要素が空です"** - 表示処理の問題
- **"エラー"** - その他のエラー

## ステップ3: ログをエクスポートする

問題が発生している場合は、ログをエクスポートして共有してください：

1. **ログビューアーを開く**

2. **「エクスポート」ボタンをクリック**
   - ログビューアーの上部右側にあります

3. **JSONファイルがダウンロードされる**
   - ファイル名は `salesmind_logs_YYYY-MM-DDTHH-MM-SS.json` 形式です

4. **ファイルを開いて内容を確認**
   - テキストエディタで開くか、JSONビューアーで確認できます

## トラブルシューティング

### 📋ボタンが見つからない場合

1. **ページをリロード**（F5キー）
2. **ブラウザのズームレベルを確認**（100%推奨）
3. **ウィンドウサイズを確認**（小さすぎると見えない場合があります）
4. **ブラウザの開発者ツール（F12）のコンソールで以下を実行**：
   ```javascript
   // ログビューアーの状態を確認
   console.log(window.logViewer);
   
   // ログビューアーを強制的に開く
   window.logViewer.toggle();
   ```

### ログが記録されない場合

1. **ブラウザの開発者ツール（F12）を開く**
2. **Consoleタブを開く**
3. **以下のコマンドでロガーの状態を確認**：
   ```javascript
   console.log(window.logger);
   console.log('ログ数:', window.logger.getAllLogs().length);
   ```

4. **ロガーが初期化されていない場合は、ページをリロード**

### ログビューアーが表示されない場合

1. **開発者ツール（F12）のConsoleタブを開く**
2. **エラーメッセージがないか確認**
3. **以下のコマンドで要素の存在を確認**：
   ```javascript
   console.log(document.getElementById('logViewer'));
   console.log(document.getElementById('logViewerToggle'));
   ```

## よくある問題と確認ポイント

### 問題: SPIN質問生成後に空のまま

**確認すべきログ**：
1. **"レスポンステキストを取得"** のログ
   - `text` フィールドにレスポンスの内容が表示されます
   - `{"questions": {...}}` のような形式か確認

2. **"JSON解析成功"** のログ
   - `hasQuestions: true` かどうか
   - `dataKeys` に `["questions"]` が含まれているか

3. **"displaySpinQuestions called with:"** のログ
   - `questions` オブジェクトの内容を確認
   - `situation`, `problem`, `implication`, `need` の各キーがあるか

4. **エラーログ**
   - 何かエラーが出ていれば、その内容を確認

## スクリーンショット推奨箇所

問題を報告する際は、以下のスクリーンショットがあると診断が早くなります：

1. **ログビューアーの画面**（特にエラーログ部分）
2. **ブラウザの開発者ツールのConsoleタブ**（エラーメッセージ）
3. **ブラウザの開発者ツールのNetworkタブ**（`generate/` リクエストの詳細）

